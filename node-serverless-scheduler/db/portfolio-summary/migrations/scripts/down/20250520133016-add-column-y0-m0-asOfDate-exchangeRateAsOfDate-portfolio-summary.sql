SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE (REFERENCED_TABLE_NAME = 'portfolio_summary_daily_snapshot' AND REFERENCED_TABLE_SCHEMA = 'portfolio_summary_db' AND REFERENCED_COLUMN_NAME = 'y_0') OR (TABLE_NAME = 'portfolio_summary_daily_snapshot' AND TABLE_SCHEMA = 'portfolio_summary_db' AND COLUMN_NAME = 'y_0' AND REFERENCED_TABLE_NAME IS NOT NULL);
ALTER TABLE `portfolio_summary_daily_snapshot` DROP `y_0`;
SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE (REFERENCED_TABLE_NAME = 'portfolio_summary_daily_snapshot' AND REFERENCED_TABLE_SCHEMA = 'portfolio_summary_db' AND REFERENCED_COLUMN_NAME = 'm_0') OR (TABLE_NAME = 'portfolio_summary_daily_snapshot' AND TABLE_SCHEMA = 'portfolio_summary_db' AND COLUMN_NAME = 'm_0' AND REFERENCED_TABLE_NAME IS NOT NULL);
ALTER TABLE `portfolio_summary_daily_snapshot` DROP `m_0`;
SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE (REFERENCED_TABLE_NAME = 'portfolio_summary_daily_snapshot' AND REFERENCED_TABLE_SCHEMA = 'portfolio_summary_db' AND REFERENCED_COLUMN_NAME = 'as_of_date') OR (TABLE_NAME = 'portfolio_summary_daily_snapshot' AND TABLE_SCHEMA = 'portfolio_summary_db' AND COLUMN_NAME = 'as_of_date' AND REFERENCED_TABLE_NAME IS NOT NULL);
ALTER TABLE `portfolio_summary_daily_snapshot` DROP `as_of_date`;
SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE (REFERENCED_TABLE_NAME = 'portfolio_summary_daily_snapshot' AND REFERENCED_TABLE_SCHEMA = 'portfolio_summary_db' AND REFERENCED_COLUMN_NAME = 'exchange_rate_as_of') OR (TABLE_NAME = 'portfolio_summary_daily_snapshot' AND TABLE_SCHEMA = 'portfolio_summary_db' AND COLUMN_NAME = 'exchange_rate_as_of' AND REFERENCED_TABLE_NAME IS NOT NULL);
ALTER TABLE `portfolio_summary_daily_snapshot` DROP `exchange_rate_as_of`;
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_TYPE = 'BASE TABLE' AND TABLE_NAME = 'SequelizeMeta' AND TABLE_SCHEMA = 'portfolio_summary_db';
SHOW INDEX FROM `SequelizeMeta`;
DELETE FROM `SequelizeMeta` WHERE `name` = '20250520133016-add-column-y0-m0-asOfDate-exchangeRateAsOfDate-portfolio-summary.js';
